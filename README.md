# Simmer

Simmer is a command line utility to generate scaffolding code for Vapor
applications. It uses multiple commands to be able to generate models, controllers,
views, protocols, and resources for Vapor backed servers. It follows a strict folder
structure as follows:

## Models
The models folder is where the base file for each model lives. This includes
the type definitions for the model, the schema name, and initialization code. The
default migration is added when a model is created to the migrations folder as
opposed to residing in the model itself, keeping resources separate.

## [Web|API]Representable
Models, by default, conform to Codable and therefore can be converted to JSON or
rendered in a Leaf template. However, only certain data may be necessary depending
on how the resource is requested. Therefore, representable classes are generated to
allow different data to be returned from the Web and API routes, respectively.

Each model gets Model+WebController and Model+APIController files if no
flag is passed to conform to the resource protocol. To not generate a resource
file, pass --skip-web or --skip-api to ignore these files. To ignore both files,
pass the --no-representable flag.

These files are generated by default whenever you run Scaffold or Generate Model
commands. If you have previously run Scaffold or Generate Model, but did not generate
Representable extensions, you can run `simmer generate representable <Model>`. 

## Controllers
Controllers are how the application interacts with clients. By default, both Web
and API controllers are generated for simmer. The reasoning is that there are
different attributes that may be exposed for an API versus the Web representation,
especially with Leaf templates. However, if basic CRUD operations are all that are
needed, Scaffold and Model both accept the --basic flag which will generate a
single controller for the Model. If --skip-web or --skip-api is passed to scaffold,
only the necessary representable and file will be generated. 

## Migrations
The migrations folder holds all the migrations for models. They are generated using
MTimestamp_MigrationName format, to ensure that all migrations are run in order.
If the migration is generated for a model, that models resource folder is updated
to include the migration. If the migration is not for a model, the migration
is appended to the main routes file. To pass a model to an individual migration
file, use --model ModelName or -m ModelName.

## Controllers
Controllers contain two sub folders by default, API and Web. API controllers are
by default sub-routed with /api, but this can be overwritten using --route Route
or -r Route. Web controllers use the model name and basic REST standards for the
routing.

Each controller conforms to their respective protocol that is generated when the
app is bootstrapped by the simmer initiate command.

## Tests

---

# Development
To be able to run in your own project without installing through homebrew, you can run `swift run build --configuration release` and then copy the output into your path.
